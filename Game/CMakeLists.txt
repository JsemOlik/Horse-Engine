
add_library(HorseGame SHARED
    Source/GameModule.cpp
    Source/PlayerController.cpp
    Source/PlayerController.h
)

target_include_directories(HorseGame
    PRIVATE Source
)

target_link_libraries(HorseGame
    PRIVATE
        HorseRuntime
        HorsePhysics
        glm::glm
        spdlog::spdlog
        fmt::fmt
)

target_compile_definitions(HorseGame
    PRIVATE
        HORSE_PLATFORM_WINDOWS=1
)

# Load project configuration (generated by Editor)
include("${CMAKE_CURRENT_LIST_DIR}/ProjectConfig.cmake" OPTIONAL)

# Copy the DLL to the build output directory where the exe is
add_custom_command(TARGET HorseGame POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_if_different
    $<TARGET_FILE:HorseGame>
    $<TARGET_FILE_DIR:HorseEditor>/HorseGame.dll
)
